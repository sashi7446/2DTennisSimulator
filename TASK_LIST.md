# 次にやることリスト (Task List)

2DTennisSimulator プロジェクトの改善提案リストです。

---

## 高優先度 (High Priority)

### 開発環境・品質管理

- [ ] **型チェック・リンターの導入**
  - `mypy` または `pyright` で静的型チェック
  - `black` でコードフォーマット統一
  - `ruff` または `pylint` でリンティング
  - CI/CD パイプラインへの統合

- [ ] **テストカバレッジの拡充**
  - エージェント (`agents/`) のユニットテスト追加
  - Gymnasium 環境 (`env.py`) のテスト追加
  - `main.py` CLI の統合テスト追加
  - レンダラー (`renderer.py`) の基本テスト追加

### ドキュメント

- [ ] **英語版 README の作成**
  - 現在は日本語のみ。国際的な利用のため英語版を追加

- [ ] **CONTRIBUTING.md の作成**
  - コントリビューションガイドライン
  - 開発環境セットアップ手順
  - コーディング規約

- [ ] **ドキュメント文字列の追加**
  - `chase.py`, `positional.py` など一部エージェントにドキュメント不足

### エラー処理

- [ ] **入力バリデーションの強化**
  - `game.step()` での無効アクション処理
  - `Agent.act()` の戻り値範囲チェック
  - pygame インポート失敗時の適切なハンドリング

---

## 中優先度 (Medium Priority)

### コード整理

- [ ] **renderer.py のリファクタリング**
  - 708行と大きいため、モジュール分割を検討
  - 例: `renderer/base.py`, `renderer/debug.py`, `renderer/overlays.py`

- [ ] **未使用コードの整理**
  - `debug.py` (103行) が本番コードでほぼ未使用
  - グローバルロガーを依存性注入パターンへ変更

- [ ] **Transformer エージェントの改善**
  - コメントが日本語で「魔改造」など不明瞭
  - マジックナンバーの定数化
  - 変数名の明確化

### パフォーマンス

- [ ] **バッチ処理の導入**
  - ヘッドレスモードでの複数エピソード一括処理
  - ニューラルエージェントのバッチ学習最適化

- [ ] **ベンチマーク追加**
  - 各エージェントのパフォーマンス計測
  - プロファイリングデータの収集

### ロギング

- [ ] **ロギングフレームワークの導入**
  - print 文をロギングへ置換
  - ログレベル設定 (DEBUG, INFO, WARNING, ERROR)
  - ファイル出力オプション

---

## 低優先度 (Low Priority)

### 機能追加

- [ ] **マルチポイントゲームモード**
  - 現在は1ポイント = 1エピソード
  - 複数ポイントのゲーム形式をサポート

- [ ] **エージェントトーナメントシステム**
  - 複数エージェントの総当たり戦
  - 結果の自動集計・可視化

- [ ] **報酬シェーピングユーティリティ**
  - スパース報酬問題への対応
  - カスタム報酬関数のサポート

- [ ] **学習済みポリシーの可視化**
  - エージェントの行動パターン表示
  - 意思決定の解釈可能性向上

### ユーザーエクスペリエンス

- [ ] **設定ファイルサポート**
  - YAML/TOML での設定管理
  - CLI 引数との併用

- [ ] **進捗バー表示**
  - 長時間トレーニング用のプログレス表示
  - `tqdm` などの導入

- [ ] **ヘルプテキストの充実**
  - `--help` の説明文を拡充

### プロジェクト管理

- [ ] **CHANGELOG.md の作成**
  - バージョン履歴の記録

- [ ] **ロードマップの作成**
  - 将来の機能計画

- [ ] **デモ動画・出力例の追加**
  - README に GIF やスクリーンショット追加

### 依存関係

- [ ] **requirements.txt のバージョン固定**
  - 再現性のため具体的なバージョンを指定

---

## 完了済み (Completed)

- [x] コードレビュー実施 (`CODE_REVIEW.md`)
- [x] アーキテクチャドキュメント作成 (`ARCHITECTURE.md`)
- [x] CI/CD パイプライン構築 (GitHub Actions)
- [x] 基本テスト作成 (98テスト、100%パス)
- [x] 軽微なコードレビュー指摘の修正

---

## 推奨作業順序

### フェーズ 1: クイックウィン (1-2日)
1. 型チェック・リンターの CI 追加
2. 英語版 README 作成
3. CONTRIBUTING.md 作成

### フェーズ 2: テスト強化 (3-5日)
1. エージェントのユニットテスト
2. Gymnasium 環境のテスト
3. 統合テストの追加

### フェーズ 3: コード品質 (1週間)
1. renderer.py のリファクタリング
2. ロギングフレームワーク導入
3. Transformer エージェントのクリーンアップ

### フェーズ 4: 機能拡張 (2週間以上)
1. マルチポイントゲーム実装
2. トーナメントシステム
3. ポリシー可視化ツール

---

*最終更新: 2026-01-09*
